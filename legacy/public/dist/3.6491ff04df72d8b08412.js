webpackJsonp([3],{

/***/ 808:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = connectP2P;\n\nvar _socket = __webpack_require__(347);\n\nvar _socket2 = _interopRequireDefault(_socket);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @param {Object} socket io instance\n * @returns {Object} socket.io-p2p instance\n */\nfunction connectP2P(socket) {\n  var p2p = new _socket2.default(socket, { autoUpgrade: false });\n  return p2p;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODA4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NsaWVudC9zb2NrZXQvcDJwL2luZGV4LmpzPzg2MGEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gY29ubmVjdFAyUDtcblxudmFyIF9zb2NrZXQgPSByZXF1aXJlKCdzb2NrZXQuaW8tcDJwJyk7XG5cbnZhciBfc29ja2V0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NvY2tldCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKlxuICogQHBhcmFtIHtPYmplY3R9IHNvY2tldCBpbyBpbnN0YW5jZVxuICogQHJldHVybnMge09iamVjdH0gc29ja2V0LmlvLXAycCBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBjb25uZWN0UDJQKHNvY2tldCkge1xuICB2YXIgcDJwID0gbmV3IF9zb2NrZXQyLmRlZmF1bHQoc29ja2V0LCB7IGF1dG9VcGdyYWRlOiBmYWxzZSB9KTtcbiAgcmV0dXJuIHAycDtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jbGllbnQvc29ja2V0L3AycC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gODA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///808\n");

/***/ }),

/***/ 809:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.handleSocketDisconnect = handleSocketDisconnect;\n\nvar _error = __webpack_require__(37);\n\n/**\n * @returns {function} redux thunk\n */\nfunction handleSocketDisconnect() {\n  return function innerHandleSocketDisconnect(dispatch, getState) {\n    if (getState().token) {\n      dispatch((0, _error.addError)('Connection interrupted. Please refresh the page.'));\n    }\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODA5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NsaWVudC9hY3Rpb25zL3NvY2tldC5qcz9iN2VkIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuaGFuZGxlU29ja2V0RGlzY29ubmVjdCA9IGhhbmRsZVNvY2tldERpc2Nvbm5lY3Q7XG5cbnZhciBfZXJyb3IgPSByZXF1aXJlKCcuL2Vycm9yJyk7XG5cbi8qKlxuICogQHJldHVybnMge2Z1bmN0aW9ufSByZWR1eCB0aHVua1xuICovXG5mdW5jdGlvbiBoYW5kbGVTb2NrZXREaXNjb25uZWN0KCkge1xuICByZXR1cm4gZnVuY3Rpb24gaW5uZXJIYW5kbGVTb2NrZXREaXNjb25uZWN0KGRpc3BhdGNoLCBnZXRTdGF0ZSkge1xuICAgIGlmIChnZXRTdGF0ZSgpLnRva2VuKSB7XG4gICAgICBkaXNwYXRjaCgoMCwgX2Vycm9yLmFkZEVycm9yKSgnQ29ubmVjdGlvbiBpbnRlcnJ1cHRlZC4gUGxlYXNlIHJlZnJlc2ggdGhlIHBhZ2UuJykpO1xuICAgIH1cbiAgfTtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jbGllbnQvYWN0aW9ucy9zb2NrZXQuanNcbi8vIG1vZHVsZSBpZCA9IDgwOVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///809\n");

/***/ }),

/***/ 915:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _socket = __webpack_require__(334);\n\nvar _socket2 = _interopRequireDefault(_socket);\n\nvar _p2p = __webpack_require__(808);\n\nvar _p2p2 = _interopRequireDefault(_p2p);\n\nvar _socket3 = __webpack_require__(809);\n\nvar _store = __webpack_require__(403);\n\nvar _store2 = _interopRequireDefault(_store);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar socketEventHandlers = {\n  connect: function connect() {\n    console.log('Connection established with server');\n  },\n  disconnect: function disconnect() {\n    console.log('Connect to the server terminated');\n    _store2.default.dispatch((0, _socket3.handleSocketDisconnect)());\n  }\n};\n\nvar attachEventListeners = function attachEventListeners(socket) {\n  return Object.keys(socketEventHandlers).map(function (event) {\n    return socket.on(event, socketEventHandlers[event].bind(null, _store2.default));\n  });\n};\n\nvar connect = function connect(token) {\n  return _socket2.default.connect(\"http://72.225.197.202:4000/\", { query: 'token=' + token });\n};\n\nvar _store$getState = _store2.default.getState(),\n    token = _store$getState.token;\n\nvar socket = connect(token);\nattachEventListeners(socket, _store2.default);\n\nsocket.p2p = (0, _p2p2.default)(socket);\n\n_store2.default.subscribe(function () {\n  var _store$getState2 = _store2.default.getState(),\n      newToken = _store$getState2.token;\n\n  if (newToken === token) return;\n  if (socket) socket.disconnect();\n  socket = null;\n  if (newToken) socket = connect(newToken);\n  if (socket) attachEventListeners(socket, _store2.default);\n  token = newToken;\n});\n\nexports.default = function () {\n  return socket;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTE1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NsaWVudC9zb2NrZXQvY2xpZW50LmpzPzBkMjQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3NvY2tldCA9IHJlcXVpcmUoJ3NvY2tldC5pby1jbGllbnQnKTtcblxudmFyIF9zb2NrZXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc29ja2V0KTtcblxudmFyIF9wMnAgPSByZXF1aXJlKCcuL3AycCcpO1xuXG52YXIgX3AycDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wMnApO1xuXG52YXIgX3NvY2tldDMgPSByZXF1aXJlKCcuLi9hY3Rpb25zL3NvY2tldCcpO1xuXG52YXIgX3N0b3JlID0gcmVxdWlyZSgnLi4vc3RvcmUnKTtcblxudmFyIF9zdG9yZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdG9yZSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBzb2NrZXRFdmVudEhhbmRsZXJzID0ge1xuICBjb25uZWN0OiBmdW5jdGlvbiBjb25uZWN0KCkge1xuICAgIGNvbnNvbGUubG9nKCdDb25uZWN0aW9uIGVzdGFibGlzaGVkIHdpdGggc2VydmVyJyk7XG4gIH0sXG4gIGRpc2Nvbm5lY3Q6IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7XG4gICAgY29uc29sZS5sb2coJ0Nvbm5lY3QgdG8gdGhlIHNlcnZlciB0ZXJtaW5hdGVkJyk7XG4gICAgX3N0b3JlMi5kZWZhdWx0LmRpc3BhdGNoKCgwLCBfc29ja2V0My5oYW5kbGVTb2NrZXREaXNjb25uZWN0KSgpKTtcbiAgfVxufTtcblxudmFyIGF0dGFjaEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gYXR0YWNoRXZlbnRMaXN0ZW5lcnMoc29ja2V0KSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhzb2NrZXRFdmVudEhhbmRsZXJzKS5tYXAoZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuIHNvY2tldC5vbihldmVudCwgc29ja2V0RXZlbnRIYW5kbGVyc1tldmVudF0uYmluZChudWxsLCBfc3RvcmUyLmRlZmF1bHQpKTtcbiAgfSk7XG59O1xuXG52YXIgY29ubmVjdCA9IGZ1bmN0aW9uIGNvbm5lY3QodG9rZW4pIHtcbiAgcmV0dXJuIF9zb2NrZXQyLmRlZmF1bHQuY29ubmVjdChwcm9jZXNzLmVudi5BUFBfVVJMLCB7IHF1ZXJ5OiAndG9rZW49JyArIHRva2VuIH0pO1xufTtcblxudmFyIF9zdG9yZSRnZXRTdGF0ZSA9IF9zdG9yZTIuZGVmYXVsdC5nZXRTdGF0ZSgpLFxuICAgIHRva2VuID0gX3N0b3JlJGdldFN0YXRlLnRva2VuO1xuXG52YXIgc29ja2V0ID0gY29ubmVjdCh0b2tlbik7XG5hdHRhY2hFdmVudExpc3RlbmVycyhzb2NrZXQsIF9zdG9yZTIuZGVmYXVsdCk7XG5cbnNvY2tldC5wMnAgPSAoMCwgX3AycDIuZGVmYXVsdCkoc29ja2V0KTtcblxuX3N0b3JlMi5kZWZhdWx0LnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gIHZhciBfc3RvcmUkZ2V0U3RhdGUyID0gX3N0b3JlMi5kZWZhdWx0LmdldFN0YXRlKCksXG4gICAgICBuZXdUb2tlbiA9IF9zdG9yZSRnZXRTdGF0ZTIudG9rZW47XG5cbiAgaWYgKG5ld1Rva2VuID09PSB0b2tlbikgcmV0dXJuO1xuICBpZiAoc29ja2V0KSBzb2NrZXQuZGlzY29ubmVjdCgpO1xuICBzb2NrZXQgPSBudWxsO1xuICBpZiAobmV3VG9rZW4pIHNvY2tldCA9IGNvbm5lY3QobmV3VG9rZW4pO1xuICBpZiAoc29ja2V0KSBhdHRhY2hFdmVudExpc3RlbmVycyhzb2NrZXQsIF9zdG9yZTIuZGVmYXVsdCk7XG4gIHRva2VuID0gbmV3VG9rZW47XG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gc29ja2V0O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jbGllbnQvc29ja2V0L2NsaWVudC5qc1xuLy8gbW9kdWxlIGlkID0gOTE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///915\n");

/***/ })

});